FROM node:lts-alpine AS build
WORKDIR /app

# Install dependencies and cache the result.
COPY package.json .
COPY yarn.lock .
RUN [ "yarn", "install" ]

# Copy other top level files.
# Add a line for every file needed for development process.
COPY .eslintrc .
COPY tsconfig.json .
COPY next.config.js .

EXPOSE 3000
ENTRYPOINT [ "yarn", "dev" ]